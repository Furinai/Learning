<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.linter.learning.user.dao.UserDao">

    <resultMap type="cn.linter.learning.auth.entity.User" id="UserMap">
        <result property="id" column="id"/>
        <result property="username" column="username"/>
        <result property="password" column="password"/>
        <result property="fullName" column="full_name"/>
        <association property="role" javaType="cn.linter.learning.auth.entity.Role">
            <result property="name" column="role_name"/>
        </association>
    </resultMap>

    <!--通过用户名查询单个用户-->
    <select id="selectByUsername" resultMap="UserMap">
        select u.id,
               u.username,
               u.password,
               u.full_name,
               r.name role_name
        from user u
                 join role r
                      on u.role_id = r.id
        where u.username = #{username}
    </select>

</mapper>